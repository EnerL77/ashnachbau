<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Evermind â€” This is just a dummy, Bro</title>
<meta name="description" content="Evermind is developed with clinicians and grounded in psychological science." />
<style>
  :root{
    --bg:#f6efe7;
    --ink:#171a1c;
    --muted:#4d5559;
    --brand:#1d3b44;
    --line:#e6ded6;
    --radius:20px;
    --maxw:1200px;
  }
  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--ink);
    font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}
  img{max-width:100%;display:block}

  /* --- NAV --- */
  .container{max-width:var(--maxw);margin:0 auto;padding:clamp(16px,4vw,28px)}
  .nav{display:flex;align-items:center;justify-content:space-between;gap:20px}
  .brand{display:flex;align-items:center;gap:10px;font-weight:700;letter-spacing:.2px}
  .brandMark{width:20px;height:20px;border-radius:4px;
    background:conic-gradient(from 180deg,#2f6f7c,#5fc3b2,#2f6f7c)}
  .navLinks{display:flex;gap:28px;align-items:center}
  .navLinks a{color:var(--ink);text-decoration:none;opacity:.9}
  .btn{
    display:inline-flex;align-items:center;gap:.6rem;
    background:var(--brand);color:#fff;text-decoration:none;
    padding:.9rem 1.2rem;border-radius:999px;font-weight:600;
    box-shadow:0 2px 0 #0c1c20;
  }
  .btn svg{width:18px;height:18px;fill:#fff}

  /* --- HERO --- */
  .hero{
    display:grid;grid-template-columns:1.15fr .85fr;gap:28px;align-items:center;
    margin-top:clamp(10px,2vw,20px);
  }
  @media (max-width:1024px){.hero{grid-template-columns:1fr}}
  .copy{padding-right:clamp(0px,6vw,40px)}
  h1{font-size:clamp(40px,6.8vw,84px);line-height:1.02;margin:0 0 14px;letter-spacing:-.01em}
  .lead{font-size:clamp(16px,2.4vw,20px);color:var(--muted);line-height:1.5;margin:0 0 22px;max-width:42ch}

  /* CTA */
  .actions{display:flex;align-items:center;gap:14px;flex-wrap:wrap;margin-bottom:18px}
  .cta{
    display:inline-flex;align-items:center;gap:.8rem;padding:14px 18px;
    border-radius:999px;border:1px solid #cfc7bf;background:#fff;
    box-shadow:0 2px 0 #d6cdc4;text-decoration:none;color:var(--ink);font-weight:600;
  }
  .cta .circle{width:36px;height:36px;border-radius:999px;background:var(--brand);
    display:grid;place-items:center}
  .cta .circle svg{width:18px;height:18px;fill:#fff}
  .badges{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
  .badges img{height:44px}

  /* HERO IMG */
  .heroImg{position:relative;border-radius:16px;overflow:hidden;border:1px solid var(--line);
    background:#ddd;min-height:360px}
  .heroImg img{width:100%;height:100%;object-fit:cover}
  .heroImg:after{content:"";position:absolute;inset:0;box-shadow:inset 0 -40px 80px #0000001a;pointer-events:none}

  /* Agent Animations */
  .screenInner.listening .blob{animation:breathe 1.8s ease-in-out infinite}
  .screenInner.talking .blob{animation:talk 0.45s ease-in-out infinite}
  .screenInner.connected .dot{background:#30e17a}
  @keyframes breathe{0%{transform:scale(1);box-shadow:0 0 0 0 rgba(255,255,255,.18)}
    50%{transform:scale(1.04);box-shadow:0 0 40px 8px rgba(255,255,255,.08)}
    100%{transform:scale(1);box-shadow:0 0 0 0 rgba(255,255,255,.18)}}
  @keyframes talk{0%,100%{transform:scale(1)}50%{transform:scale(1.06)}}
</style>
</head>
<body>
<header class="container nav">
  <div class="brand"><div class="brandMark"></div>Evermind</div>
  <nav class="navLinks">
    <a href="#">Home</a><a href="#">About us</a><a href="#">Resources</a>
    <a class="btn" href="#">Download
      <svg viewBox="0 0 24 24"><path d="M12 3v12m0 0l-4-4m4 4l4-4M5 21h14"/></svg>
    </a>
  </nav>
</header>

<main class="container">
<section class="hero">
  <div class="copy">
    <h1>Hey,<br>this is just<br>a dummy, bro!</h1>
    <p class="lead">Evermind isnâ€™t just another wellness app. Itâ€™s developed with clinicians,
      trained on evidence-based methods, and tested for real impact. Every
      interaction is grounded in proven psychological science.</p>

    <div class="actions">
      <a class="cta" href="#" aria-label="Let's talk">
        Letâ€™s talk
        <span class="circle"><svg viewBox="0 0 24 24"><path d="M21 15.46V19a2 2 0 0 1-2.18 2A19.79 19.79 0 0 1 3 5.18 2 2 0 0 1 5 3h3.54a2 2 0 0 1 2 1.72l.3 2a2 2 0 0 1-.57 1.73l-1.2 1.2a16 16 0 0 0 6.45 6.45l1.2-1.2a2 2 0 0 1 1.73-.57l2 .3A2 2 0 0 1 21 15.46Z" fill="#fff"/></svg></span>
      </a>
    </div>

    <div class="badges">
      <a href="#"><img src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg"></a>
      <a href="#"><img src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg"></a>
    </div>
  </div>

    <figure class="heroImg">
      <img src="https://images.unsplash.com/photo-1758273237963-002302368569?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=3131">
    </figure>
  </div>
</section>
</main>

<!-- === ELEVENLABS AGENT SCRIPT === -->
<script type="module">
const AGENT_ID = "agent_6501k6wsvkvqf55av1b84g1ww65t";

const talkBtn     = document.querySelector('.actions .cta');
const cancelBtn   = document.querySelector('.cancel');
const screenInner = document.querySelector('.screenInner');
const promptEl    = document.querySelector('.prompt');

let convo = null;
let Conversation = null;

function setStatus({connected=false,mode='idle'}){
  screenInner.classList.toggle('connected',connected);
  ['listening','talking'].forEach(m=>screenInner.classList.toggle(m,m===mode));
}
function setPrompt(text){ if(text) promptEl.textContent=text; }
function setTalkLabel(t){ const c=talkBtn.querySelector('.circle'); talkBtn.innerHTML=t; if(c) talkBtn.appendChild(c); }
function showErr(m){console.error(m);setPrompt(m);setTalkLabel('Letâ€™s talk');}

async function ensureSdk(){
  if(Conversation) return Conversation;
  try{
    const m=await import('https://cdn.jsdelivr.net/npm/@elevenlabs/client/+esm');
    Conversation=m.Conversation;
    console.log('[Evermind] ElevenLabs SDK loaded.');
  }catch(e){console.error(e);throw new Error('SDK load failed');}
  return Conversation;
}

async function startConversation(){
  if(convo) return;
  setTalkLabel('Connectingâ€¦');
  try{await navigator.mediaDevices.getUserMedia({audio:true});}
  catch(e){return showErr('Mic permission denied.');}
  try{await ensureSdk();}
  catch(e){return showErr('Could not load SDK.');}
  try{
    convo=await Conversation.startSession({
      agentId:AGENT_ID,connectionType:'webrtc',
      onStatusChange:(s)=>{
        console.log('[status]',s);
        if(s==='connected'){setStatus({connected:true,mode:'listening'});
          setPrompt('Hey, Iâ€™m here â€” whatâ€™s on your mind?');setTalkLabel('Talkingâ€¦');}
        if(s==='disconnected') endConversation();
      },
      onModeChange:(m)=>{if(m==='listening')setStatus({connected:true,mode:'listening'});
                         else if(m==='speaking')setStatus({connected:true,mode:'talking'});},
      onMessage:(msg)=>{const t=msg?.text||msg?.message?.text||'';if(t)setPrompt(t);},
      onError:(e)=>{console.error(e);showErr('Voice error');endConversation();}
    });
  }catch(e){console.error(e);showErr('Could not start session.');}
}

async function endConversation(){
  try {
    // Session ordnungsgemÃ¤ÃŸ schlieÃŸen
    if (convo && typeof convo.endSession === "function") {
      await convo.endSession();
      console.log("[Evermind] Session closed via endSession()");
    }
  } catch (e) {
    console.warn("[Evermind] endSession() failed:", e);
  }

  // ggf. WebRTC-Verbindung manuell trennen
  try {
    if (convo?.close) convo.close();
  } catch (_) {}

  // Zustand zurÃ¼cksetzen
  convo = null;
  setStatus({ connected: false, mode: "idle" });
  setPrompt("â€œWant a quick stress relief?â€");
  setTalkLabel("Letâ€™s talk");
}

talkBtn?.addEventListener("click", (e) => {
  e.preventDefault();
  console.log("Talk clicked");
  if (convo) {
    endConversation(); // ðŸ”¹ zweiter Klick beendet
  } else {
    startConversation();
  }
});

cancelBtn?.addEventListener("click", (e) => {
  e.preventDefault();
  console.log("Cancel clicked");
  endConversation(); // ðŸ”¹ roter Kreis beendet
});

// optional: Sicherheit â€“ beende GesprÃ¤ch, wenn Tab geschlossen wird
window.addEventListener("beforeunload", () => {
  if (convo) convo.endSession?.();
});
