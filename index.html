<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Evermind — This is just a dummy</title>
<meta name="description" content="Evermind is developed with doctors and therapists and is grounded in psychological science." />
<style>
  :root{ --bg:#f6efe7; --ink:#171a1c; --muted:#4d5559; --brand:#1d3b44; --line:#e6ded6; --radius:20px; --maxw:1200px; }
  *{box-sizing:border-box}
  html,body{ margin:0; background:var(--bg); color:var(--ink);
    font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial }
  img{max-width:100%;display:block}
  a{text-decoration:none}

  /* LAYOUT */
  .container{max-width:var(--maxw);margin:0 auto;padding:clamp(16px,4vw,28px)}

  /* NAV */
  .nav{display:grid;grid-template-columns:auto 1fr;align-items:center;column-gap:24px;}
  .brand{display:flex;align-items:center;gap:10px}
  .logo{width: clamp(80px, 10vw, 150px);height:auto;display:inline-block;vertical-align:middle;transition: transform .2s ease;}
  .logo:hover{ transform: translateY(-1px) }
  .navLinks{display:flex;gap:28px;align-items:center;justify-content:flex-end;flex-wrap:wrap;}
  .navLinks a{color:var(--ink);opacity:.9}
  .btn{display:inline-flex;align-items:center;gap:.6rem;background:var(--brand);color:#fff;
    padding:.9rem 1.2rem;border-radius:999px;font-weight:600;box-shadow:0 2px 0 #0c1c20}

  /* Language switch */
  .langSwitch{display:inline-flex;gap:6px;align-items:center;margin-right:6px}
  .langBtn{font:inherit;padding:.4rem .7rem;border:1px solid var(--line);background:#fff;border-radius:999px;cursor:pointer;opacity:.9}
  .langBtn.is-active{border-color:var(--brand);box-shadow:0 1px 0 #dcd3ca;opacity:1;font-weight:700}

  @media (max-width: 820px){ .navLinks{gap:20px} .btn{padding:.8rem 1.1rem} }
  @media (max-width: 640px){ .container{padding:16px} .logo{ width: clamp(72px, 22vw, 110px) } .navLinks{gap:16px} }

  /* HERO */
  .hero{display:grid;grid-template-columns:1.15fr .85fr;gap:28px;align-items:stretch;margin-top:clamp(10px,2vw,20px)}
  @media (max-width:1024px){.hero{grid-template-columns:1fr}}
  .copy{padding-right:clamp(0px,6vw,40px)}
  h1{font-size:clamp(40px,6.8vw,84px);line-height:1.02;margin:0 0 14px;letter-spacing:-.01em}
  .lead{font-size:clamp(16px,2.4vw,20px);color:var(--muted);line-height:1.5;margin:0 0 22px;max-width:42ch}

  /* CTA */
  .actions{display:flex;align-items:center;gap:14px;flex-wrap:wrap;margin-bottom:18px}
  .cta{display:inline-flex;align-items:center;gap:.8rem;padding:14px 18px;border-radius:999px;
    border:1px solid #cfc7bf;background:#fff;box-shadow:0 2px 0 #d6cdc4;color:var(--ink);font-weight:600}
  .cta .circle{
    width:36px;height:36px;border-radius:999px;
    background:var(--brand);display:grid;place-items:center;
    transition:background .2s ease, box-shadow .2s ease
  }
  .cta .circle svg{width:18px;height:18px;fill:#fff}

  /* Icon rot + „Stop“ im Call-State */
  .cta.is-talking .circle{
    background:#e53935;
    box-shadow:0 0 0 2px rgba(229,57,53,.25);
  }

  /* Voice Wave */
  .viz{display:inline-grid;grid-auto-flow:column;gap:6px;align-items:end;height:18px;margin-left:8px}
  .viz .bar{width:3px;height:6px;border-radius:999px;background:currentColor;opacity:.95}
  @keyframes beat{0%,100%{height:6px}50%{height:18px}}
  .cta.is-idle .viz .bar{animation:beat 3s ease-in-out infinite}
  .cta.is-idle .viz .bar:nth-child(odd){animation-delay:.2s}
  .cta.is-talking .viz .bar{animation:beat 1.1s ease-in-out infinite}
  .cta.is-talking .viz .bar:nth-child(2){animation-delay:.08s}
  .cta.is-talking .viz .bar:nth-child(3){animation-delay:.16s}
  .cta.is-talking .viz .bar:nth-child(4){animation-delay:.24s}
  .cta.is-talking .viz .bar:nth-child(5){animation-delay:.32s}
  .cta.is-talking .viz .bar:nth-child(6){animation-delay:.40s}

  /* Store badges */
  .badges{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
  .badges img{height:44px}

  /* HERO image */
  .heroImg{position:relative;margin:0!important;border:none!important;border-radius:0!important;background:none!important;
    box-shadow:none!important;overflow:hidden!important;width:100%!important;min-height:clamp(360px,60vh,720px)!important}
  .heroImg img{width:100%!important;height:100%!important;object-fit:cover!important;border-radius:0!important}

  /* BILLBOARD */
  .billboard{position:relative;margin:0;padding:0;width:100%;overflow:hidden;border-radius:0}
  .billboard .bg{width:100%;height:min(65vh,620px);object-fit:cover;display:block;filter:saturate(1.05) contrast(1.02)}
  .billboard .overlay{position:absolute;inset:0;background:linear-gradient(180deg, rgba(246,239,231,0), rgba(246,239,231,.85))}
  .billboard .copy{position:absolute;inset:0;display:grid;align-content:end;padding:clamp(18px,5vw,44px)}
  .billboard h2{font-size:clamp(36px,7vw,84px);line-height:.98;margin:0 0 8px}
  .billboard p{font-size:clamp(16px,2vw,20px);margin:0;color:var(--muted)}

  /* SECTIONS */
  .section{padding:clamp(28px,6vw,56px) 0}
  .kicker{font-weight:700;letter-spacing:.08em;text-transform:uppercase;color:var(--brand);font-size:.9rem;margin:0 0 6px}
  .h2{font-size:clamp(28px,4.6vw,44px);line-height:1.1;margin:0 0 10px}
  .sub{color:var(--muted);max-width:70ch;margin:0 0 24px}

  .features{display:grid;grid-template-columns:repeat(3,1fr);gap:22px;margin-top:14px}
  @media (max-width:900px){.features{grid-template-columns:1fr 1fr}}
  @media (max-width:640px){.features{grid-template-columns:1fr}}
  .card{background:#fff;border:1px solid var(--line);border-radius:16px;padding:18px;box-shadow:0 2px 0 #e8e1d9}
  .card h3{margin:10px 0 6px;font-size:1.1rem}
  .card p{margin:0;color:var(--muted)}

  .howGrid{display:grid;gap:22px;grid-template-columns:repeat(3,1fr)}
  @media (max-width:900px){.howGrid{grid-template-columns:1fr}}

  /* INVERSE WAITLIST */
  .section--inverse{background:var(--ink);color:#fff;border-top:1px solid #0e1214;border-bottom:1px solid #0e1214}
  .section--inverse .waitlist{background:transparent;border:1px solid rgba(255,255,255,.15);box-shadow:none;border-radius:20px;padding:48px 24px;text-align:center}
  .section--inverse .h2,.section--inverse .sub{color:#fff}
  .section--inverse .sub{opacity:.85}
  .section--inverse .field{display:flex;justify-content:center;gap:12px;flex-wrap:wrap;margin-top:16px}
  .section--inverse .field input[type="email"]{padding:14px 18px;border:1px solid rgba(255,255,255,.25);border-radius:999px;min-width:280px;font-size:1rem;background:transparent;color:#fff}
  .section--inverse .field input[type="email"]::placeholder{color:rgba(255,255,255,.6)}
  .section--inverse .btn{background:#fff;color:var(--ink);box-shadow:0 2px 0 #d6cdc4;border:1px solid #cfc7bf}

  footer{color:var(--muted);text-align:center;padding:48px 0}
</style>
</head>
<body>
<header class="container nav">
  <div class="brand">
    <img src="/public/logo.png" alt="Evermind logo" class="logo">
  </div>
  <nav class="navLinks">
    <a href="#how">How it works</a>
    <a href="#features">Features</a>
    <div class="langSwitch">
      <button type="button" data-lang="en" class="langBtn is-active">EN</button>
      <button type="button" data-lang="de" class="langBtn">DE</button>
    </div>
  </nav>
</header>

<main class="container">
  <section class="hero" aria-labelledby="h1">
    <div class="copy">
      <h1 id="h1">The Voice<br>that cares</h1>
      <p class="lead">
        Evermind isn’t just another chat bot. It’s developed with clinicians and therapists and is trained on evidence-based methods, tested for real impact.
      </p>
      <div class="actions">
        <a
          class="cta is-idle"
          id="talkBtn"
          href="#"
          aria-label="Let's talk"
          aria-pressed="false"
          data-label-start="Let’s talk"
          data-label-connecting="Connecting…"
          data-label-talking="Talking…"
          data-label-stop="Stop"
        >
          <span class="label">Let’s talk</span>
          <span class="circle" aria-hidden="true">
            <svg viewBox="0 0 24 24" width="18" height="18">
              <path d="M21 15.46V19a2 2 0 0 1-2.18 2A19.79 19.79 0 0 1 3 5.18 2 2 0 0 1 5 3h3.54a2 2 0 0 1 2 1.72l.3 2a2 2 0 0 1-.57 1.73l-1.2 1.2a16 16 0 0 0 6.45 6.45l1.2-1.2a2 2 0 0 1 1.73-.57l2 .3A2 2 0 0 1 21 15.46Z" fill="#fff"/>
            </svg>
          </span>
          <span class="viz" aria-hidden="true">
            <span class="bar"></span><span class="bar"></span><span class="bar"></span>
            <span class="bar"></span><span class="bar"></span><span class="bar"></span>
          </span>
        </a>
      </div>
      <div class="badges">
        <a href="#"><img src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg" alt="App Store"></a>
        <a href="#"><img src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg" alt="Google Play"></a>
      </div>
    </div>
    <figure class="heroImg">
      <img src="/public/hero2.png" alt="Listening outdoors">
    </figure>
  </section>
</main>

<section class="billboard" aria-labelledby="bb1">
  <img class="bg" src="/public/billboard1.jpg" alt="Morning light and calm scene">
  <div class="overlay"></div>
  <div class="copy container">
    <h2 id="bb1">The voice that clears your head.</h2>
    <p>Short 2–5 minute micro-dialogues when you need them most.</p>
  </div>
</section>

<section id="features" class="section container" aria-labelledby="features-h">
  <p class="kicker">Benefits</p>
  <h2 id="features-h" class="h2">What you get with Evermind</h2>
  <div class="features">
    <article class="card"><h3>Talk, don’t type.</h3><p>Speak naturally—Evermind listens and responds in real-time.</p></article>
    <article class="card"><h3>Feel lighter in minutes.</h3><p>Micro-sessions fit into any day—no appointments.</p></article>
    <article class="card"><h3>Always there, never judging.</h3><p>24/7 companion—available any time you need to talk.</p></article>
  </div>
</section>

<section class="section container" id="how" aria-labelledby="how-h">
  <p class="kicker">How it works</p>
  <h2 id="how-h" class="h2">Three simple steps to feel better</h2>
  <div class="howGrid">
    <article class="card"><h3>1. Talk</h3><p>Start a short voice chat whenever you need to clear your mind.</p></article>
    <article class="card"><h3>2. Reflect</h3><p>Evermind helps you make sense of what you feel—without judgment.</p></article>
    <article class="card"><h3>3. Grow</h3><p>Build daily voice routines that strengthen your emotional resilience.</p></article>
  </div>
</section>

<section class="section section--inverse" id="waitlist">
  <div class="container">
    <div class="waitlist" aria-labelledby="wl-h">
      <h2 id="wl-h" class="h2">Be among the first to try Evermind</h2>
      <p class="sub">Join our early-access list and get notified when the voice companion goes live.</p>
      <form action="https://formspree.io/f/your-form-id" method="POST" class="field">
        <input type="email" name="email" placeholder="Enter your email" required aria-label="Email address">
        <button type="submit" class="btn">Join Waitlist</button>
      </form>
    </div>
  </div>
</section>

<footer class="container">
  <p>© 2025 Evermind. All rights reserved.</p>
  <p><a href="#">Privacy Policy</a> · <a href="#">Imprint</a></p>
</footer>

<!-- ELEVENLABS: Start/Stop + Button-States -->
<script type="module">
  const AGENT_ID = "agent_6501k6wsvkvqf55av1b84g1ww65t";
  const talkBtn = document.getElementById('talkBtn');

  let Conversation = null;
  let convo = null;
  let running = false;
  let micStream = null;
  let isEnding = false;

  const L = (key, fallback) => talkBtn?.dataset[key] || fallback;

  function setLabel(txt){
    const lab = talkBtn?.querySelector('.label');
    if(lab) lab.textContent = txt;
  }

  function setIdle(){
    talkBtn.classList.add('is-idle');
    talkBtn.classList.remove('is-talking');
    talkBtn.setAttribute('aria-pressed','false');
    running = false;
    setLabel(L('labelStart','Let’s talk'));
  }

  function setTalkingStateConnecting(){
    talkBtn.classList.remove('is-idle');
    talkBtn.classList.add('is-talking');
    talkBtn.setAttribute('aria-pressed','true');
    setLabel(L('labelConnecting','Connecting…'));
  }

  function setTalkingStateActive(){
    talkBtn.classList.remove('is-idle');
    talkBtn.classList.add('is-talking');
    talkBtn.setAttribute('aria-pressed','true');
    setLabel(L('labelStop','Stop'));
  }

  async function ensureSdk(){
    if(Conversation) return Conversation;
    const m = await import('https://cdn.jsdelivr.net/npm/@elevenlabs/client/+esm');
    Conversation = m.Conversation;
    return Conversation;
  }

  async function startConversation(){
    if(running) return;
    console.log('[EL] startConversation');
    running = true;
    setTalkingStateConnecting();

    try {
      micStream = await navigator.mediaDevices.getUserMedia({ audio:true });
      console.log('[EL] mic acquired');
    } catch(e){
      console.warn('[EL] mic error', e);
      running = false;
      setIdle();
      return;
    }

    try { await ensureSdk(); }
    catch(e){
      console.warn('[EL] SDK load error', e);
      running = false;
      setIdle();
      stopMic();
      return;
    }

    try{
      convo = await Conversation.startSession({
        agentId: AGENT_ID,
        connectionType: 'webrtc',
        onStatusChange: (s)=>{
          console.log('[EL] status:', s);
          if(s === 'connected'){
            setTalkingStateActive();
          }
          if(s === 'disconnected'){
            endConversation({remote:true});
          }
        },
        onError: (err)=> {
          console.warn('[EL] onError', err);
          endConversation({error:true});
        }
      });
      console.log('[EL] session started', convo);
    }catch(e){
      console.warn('[EL] startSession error', e);
      running = false;
      setIdle();
      stopMic();
    }
  }

  function stopMic(){
    try{ micStream?.getTracks?.().forEach(t=>t.stop()); }catch(_){}
    micStream = null;
  }

  function stopPeerConnections(){
    try{
      if(convo?.pc?.getSenders){ convo.pc.getSenders().forEach(s=>{ try{s.track?.stop();}catch(_){}}); }
      if(convo?.pc?.getReceivers){ convo.pc.getReceivers().forEach(r=>{ try{r.track?.stop();}catch(_){}}); }
      if(convo?.pc?.close){ convo.pc.close(); }
    }catch(_){}
  }

  function stopAudioTags(){
    try{
      document.querySelectorAll('audio').forEach(a=>{
        try{ a.pause(); a.srcObject = null; a.removeAttribute('src'); }catch(_){}
      });
    }catch(_){}
  }

  async function tryEndAll(){
    const calls = [
      async()=>await convo?.endSession?.(),
      async()=>await Conversation?.endSession?.(convo?.sessionId),
      async()=>await convo?.disconnect?.(),
      async()=>await convo?.close?.(),
      async()=>await convo?.stop?.(),
      async()=>await convo?.end?.(),
    ];
    for(const fn of calls){
      try{ await fn?.(); }catch(_){}
    }
  }

  async function endConversation(opts={}){
    if(!running && !convo) return;
    if(isEnding) return;
    isEnding = true;
    console.log('[EL] endConversation', opts);

    try{ await tryEndAll(); }catch(_){}

    stopPeerConnections();
    stopAudioTags();
    stopMic();

    convo = null;
    running = false;
    setIdle();

    setTimeout(()=>{
      const anyPlaying = Array.from(document.querySelectorAll('audio'))
        .some(a=>!a.paused && !a.ended);
      if(anyPlaying){
        console.warn('[EL] hard-stop fallback');
        stopAudioTags();
        stopPeerConnections();
        stopMic();
      }
      isEnding = false;
    }, 600);
  }

  talkBtn?.addEventListener('click', (e)=>{
    e.preventDefault();
    if(running || convo){
      // egal ob "Connecting…" oder schon verbunden: Klick = Stop
      endConversation({manual:true});
    } else {
      startConversation();
    }
  });

  window.addEventListener('keydown', (e)=>{
    if(e.key === 'Escape' && (running || convo)) endConversation({escape:true});
  });

  window.addEventListener('beforeunload', ()=>{
    try{ endConversation({unload:true}); }catch(_){}
  });

  setIdle();
</script>

<!-- super-minimale Language-Logik -->
<script>
  function applyLang(lang){
    document.querySelectorAll('.langBtn').forEach(b=>b.classList.toggle('is-active', b.dataset.lang===lang));
    document.documentElement.lang = lang;
  }
  document.querySelectorAll('.langBtn').forEach(btn=>{
    btn.addEventListener('click', ()=>applyLang(btn.dataset.lang));
  });
  applyLang('en');
</script>
</body>
</html>
